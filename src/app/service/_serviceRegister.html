<!-- include service tab tool bit -->
<div ng-include="'/app/service/_tabToolbit.html'"></div>

<div ng-controller="Service as vm" class="content services">

	<section>
		<h2>
			Register a New Service
		</h2>
		<section>
			<h4>Select a service from the list below to begin the registration process</h4>
			<div ng-show="vm.display_error" class="message error">Error: Please try again.  
				<br/>
				Message: {{vm.errorInfo.message}} <br/>
				success: {{vm.errorInfo.success}} <br/>
				clientTxnId: {{vm.errorInfo.clientTxnId}} <br/>
			</div>
			<form ng-submit="vm.getServiceDetails()">
				<select ng-model="vm.getDataById" ng-options="option as option.display_name for option in vm.getUnpublishedData() | orderBy:'eai_application_name'">
					
				</select>
				<input type="submit" class="button" value="Go">
			</form>
		</section>
		<div data-ng-show="vm.showError" class="message error">There was an error retrieving the unpublished service data. </div>
		<div data-ng-show="vm.requiredError" class="message error">Please fill in all required fields</div>
		<section data-ng-show="vm.displayForm"> 
				<h4>Please complete the form below to process the service registration</h4>
				<form >
					<table>
						<tr>
							<td class="registerTable">
							<label>EAI Application Name</label>
							</td>
							<td>
								<input style="width:200px" type="text" data-ng-model="vm.list.data.services[0].eai_application_name" readonly></input>
							</td>
						</tr>
						<tr>
							<td class="registerTable">
							<label>Friendly Name</label>
							</td>
							<td>
								<input style="width:200px" type="text" data-ng-model="vm.list.data.services[0].eai_friendly_name"></input>
							</td>
						</tr>
						<tr>
							<td class="registerTable">
								<label>Category</label>
							</td>
							<td>
								<input style="width:200px" type="text" data-ng-model="vm.list.data.services[0].category" readonly></input>
							</td>
						</tr>
						<tr> <!-- by default same as eai application name changable -->
							<td class="registerTable">
							<label>EAI Profile Name *</label>
							</td>
							<td>
								<input type="text" data-ng-model="vm.list.data.services[0].eai_profile_name"/>
							</td>
						</tr>
						<tr>
							<td class="registerTable">
								<label>Interface *</label>
							</td>
							<td>
								<select data-ng-model="vm.list.data.services[0].interface">
									<option value="SOAP">SOAP</option>
									<option value="REST" hidden="true">REST</option>
								</select>
							</td>
						</tr>
						<tr>
							<td class="registerTable">
								<label>Status *</label>
							</td>
							<td>
								<select data-ng-model="vm.list.data.services[0].state">
									<option value="active">Active</option>
									<option value="inactive">Inactive</option>
								</select>

							</td>
						</tr>
						<tr>
							<td class="registerTable">
								<label>Description</label>
							</td>
							<td style="width: 100%">
								<textarea rows="5" cols="65" data-ng-model="vm.list.data.services[0].eai_description"></textarea>
							</td>
						</tr>
						<tr>
							<td class="registerTable">
								<label>URL's</label>
							</td>
							<br/>
							<td>
								<form>
									<input type="text" data-ng-model="vm.urlListAdd">
									<input type="submit" class="button" value="Add URL" ng-click="vm.addUrl();"/>
								</form>

								<ul style="list-style-type:none">
								 	<li ng-repeat="url in vm.urlListArray">
								 		<label>{{url}}</label>
								 	</li>
								 </ul>
							</td>
						</tr>
					</table>
					<!-- <section ng-show="vm.list.data.services[0].interface === 'SOAP'">

 -->			<section ng-hide="true">		
 					<label>Add WSDL</label>
						<section class="wsdl_upload">
							<form name="myForm">
								<table>
									<tr>
										<td>
											<input type="radio" ng-model="vm.urlRadio" value="url" checked="true">
											<label>WSDL URL</label>
											<input ng-model="vm.urlInput" type="url" id="wsdlUrlInput" ng-show="vm.urlRadio == 'url'" />
										</td>
									</tr>
									<tr>
										<td>
											<input type="radio" ng-model="vm.urlRadio" value="text" >
											<label>WSDL XML</label>
											<textarea ng-model="vm.textarea" cols="45" rows="7" ng-show="vm.urlRadio == 'text'" /></textarea>
										</td>
									</tr>
									<tr>
										<td>
											<a href="" class="button-small" ng-click="vm.getWsdldetails()">Go</a>
										</td>
									</tr>
								</table>
							</form>
						</section>
						<br>
						<section class="wsdl_operations" ng-show="vm.wsdlAddGoCLicked">
							<table>
								<thead>
									<tr>
										<td>Name</td>
										<td>State</td>
										<td>Internal</td>
										<td>Description</td>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="data in vm.newWsdlList.result | orderBy: 'operation_name' | orderBy: 'state' track by $index">
										<td>{{data.operation_name}}</td>
										<td>
											<select ng-model="data.state">
												<option ng-selected="data.state === 'active'" value="active">Active</option>
												<option ng-selected="data.state === 'inactive'" value="inactive">
												Inactive</option>
												<option ng-selected="data.state === 'deprecated'" value="deprecated">Deprecated</option>
											</select>
										</td>
										<td><input type="checkbox" ng-checked="vm.getInternal(data.internal)" ng-true-value="'true'" ng-false-value="'false'" ng-model="data.internal"></td>
										<td><input type="text" value="{{data.description}}" ng-model="data.description"/></td>
									</tr>
								</tbody>
							</table>
						</section>
					</section>
					<p  style="color: red"> * Indicates Required Fields</p>
					<input type="submit" class="button" value="Register Service" ng-click="vm.saveServiceDetails()">
				</form>
		</section>
		
	</section>
</div>